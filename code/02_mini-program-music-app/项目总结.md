# 小程序项目难点总结

## 一、项目搭建及分包处理

### 1.项目目录结构划分

![image-20220510083328664](D:\截图\21_music_app\image-20220510083328664.png)

### 2.项目划分清晰目录的好处

​	合理清晰的划分目录，能够让我们开发人员更好的维护项目，增强代码的可阅读性，也让开发效率大大的提高，所以在开发过程中要有清晰的目录划分，对开发中多处使用的组件及时封装，这样可以大大提高项目的开发效率，对文件中重复的代码逻辑也要及时封装处理，提高代码的扩展性和阅读性。

## 二、项目接口文档的说明

​	本项目中所使用的的接口，皆来自github网易云音乐提供的api接口，那我们要做的就是在本地搭建环境，搭建完成之后，有条件的可以部署到自己的服务器当中，方便使用。

​	具体的接口文档说明： [LYMusic接口文档.md](LYMusic接口文档.md) 

​	另外在项目中，为了明白小程序登录的原理，还部署了自己写的一部分后端生成token，验证token的两个接口。方便理清小程序登录的思路。

## 三、项目开发主要模块及功能

​	本次开发的流程是仿照qq音乐的小程序进行开发的，功能也是非常齐全，主要分为以下几部分：

​	主页：推荐音乐，榜单音乐，热门音乐，流行音乐几大专栏，还有搜索音乐模块。

​	搜索页：主要是对用户输入的关键字进行检索，有节流功能，和显示查找结果点击能够播放响应音乐的功能。

​	MV页：主要是对流行音乐的MV做了请求，能够进行视频播放等功能。

​	播放页：包括常见的下一首，上一首，暂停，播放，循环播放，单曲循环，歌词滚动，进度条拖拽等功能。

## 四、项目开发难点

1.适配机型以及真机测试。

2.音乐播放器的歌曲滚动，进度条拖拽，，音乐播放处理。

3.全局状态管理工具的使用，实现主页也能控制小程序的播放或暂停。

4.小程序的登录，个人信息的获取。

5.组件化开发的思想，封装组件提高开发效率。

6.网络请求的封装处理，变成promise避免回调地狱。

7.细节：搜索的节流处理，图片高度的获取(监听图片的加载)，播放量等数字的格式化，分包处理。后台播放暂停处理，SDK微信小程序基础库。